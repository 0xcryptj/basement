<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Basement - Retro Web3 Arcade</title>
    <link rel="icon" type="image/x-icon" href="assets/icon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="assets/icon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/icon.ico">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/icon.ico">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/icon.ico">
    <link rel="icon" type="image/png" sizes="64x64" href="assets/icon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icon.ico">
    <link rel="manifest" href="data:application/json,{&quot;icons&quot;:[{&quot;src&quot;:&quot;assets/icon.ico&quot;,&quot;sizes&quot;:&quot;192x192&quot;,&quot;type&quot;:&quot;image/x-icon&quot;}]}">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Top Navigation Bar -->
    <nav class="navbar">
        <div class="nav-content">
            <!-- Left Logo -->
            <div class="logo">
                <a href="/" class="logo-link" id="home-link">
                    <img src="assets/tsvg.svg" alt="Logo" class="main-logo">
                    <span class="logo-text">The Basement</span>
                </a>
            </div>
            
            <!-- Center Navigation -->
            <div class="nav-links">
                <a href="arcade/arcade.html" class="nav-link">Arcade</a>
                <a href="#" class="nav-link" id="tokenomics-link">Tokenomics</a>
                <a href="#" class="nav-link" id="shop-link">Shop</a>
                <a href="/forum" class="nav-link" id="forum-link">Forum</a>
            </div>
            
            <!-- Right Wallet Connect -->
            <div class="wallet-section">
                <div class="wallet-dropdown">
                    <button id="connect-wallet" class="connect-btn">
                        <span class="btn-text">Connect Wallet</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div id="wallet-options" class="wallet-options">
                        <button class="wallet-option" data-wallet="metamask">MetaMask</button>
                        <button class="wallet-option" data-wallet="coinbase">Coinbase Wallet</button>
                        <button class="wallet-option" data-wallet="phantom">Phantom</button>
                        <button class="wallet-option" data-wallet="base">Base Wallet</button>
                    </div>
                </div>
                <div id="wallet-info" class="wallet-info">
                    <div class="user-profile">
                <div class="profile-pic-container" id="profile-pic-container">
                    <img id="profile-pic" class="profile-pic" src="" alt="Profile" style="display: none;">
                    <div id="profile-pic-placeholder" class="profile-pic-placeholder">‚óè</div>
                </div>
                        <div class="user-details">
                            <span id="wallet-address" class="wallet-address"></span>
                        </div>
                    </div>
                    <button id="disconnect-wallet" class="disconnect-btn">Disconnect Wallet</button>
                </div>
                
                <!-- Mobile Hamburger Menu -->
                <button id="mobile-menu-toggle" class="mobile-menu-toggle">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobile-menu" class="mobile-menu hidden">
                <a href="arcade/arcade.html" class="mobile-nav-link">Arcade</a>
                <a href="#" class="mobile-nav-link" id="mobile-tokenomics-link">Tokenomics</a>
                <a href="#" class="mobile-nav-link" id="mobile-shop-link">Shop</a>
                <a href="#forum" class="mobile-nav-link" id="mobile-forum-link">Forum</a>
                <a href="#chat" class="mobile-nav-link" id="mobile-chat-link">Chat</a>
                <div class="mobile-wallet-section">
                    <div id="mobile-wallet-options" class="mobile-wallet-options">
                        <button class="mobile-wallet-btn" data-wallet="metamask">Connect MetaMask</button>
                        <button class="mobile-wallet-btn" data-wallet="coinbase">Connect Coinbase Wallet</button>
                        <button class="mobile-wallet-btn" data-wallet="phantom">Connect Phantom</button>
                        <button class="mobile-wallet-btn" data-wallet="base">Connect Base Wallet</button>
                    </div>
                    <div id="mobile-wallet-info" class="mobile-wallet-info" style="display: none;">
                        <span id="mobile-wallet-address" class="mobile-wallet-address"></span>
                        <button id="mobile-disconnect-wallet" class="mobile-disconnect-btn">Disconnect</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Under Development Notice -->
    <div id="dev-notice" class="dev-notice-overlay">
        <div class="dev-notice-box">
            <div class="dev-notice-header">
                <span class="dev-notice-title">UNDER DEVELOPMENT</span>
            </div>
            <div class="dev-notice-content">
                <p class="dev-notice-text">
                    The Basement is currently in active development.
                </p>
                <p class="dev-notice-text">
                    Many features and functions are still being built.
                </p>
                <p class="dev-notice-text small">
                    Expect bugs, incomplete features, and frequent updates.
                </p>
            </div>
            <button id="close-dev-notice" class="dev-notice-close">
                ENTER ANYWAY
            </button>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Collapsible IRC Chat Sidebar -->
        <aside id="chat-sidebar" class="chat-sidebar">
            <div class="sidebar-header">
                <div class="channel-info">
                    <h3 class="sidebar-title" id="current-channel">#basement</h3>
                    <div class="channel-stats" id="channel-stats">
                        <span class="user-count">0 users</span>
                    </div>
                </div>
                <div class="sidebar-controls">
                    <button id="create-channel" class="create-channel-btn" title="Create New Channel">+</button>
                    <button id="toggle-sidebar" class="toggle-btn"><<</button>
                </div>
            </div>
            <div class="channel-list" id="channel-list">
                <div class="channel-item active" data-channel="#basement">
                    <span class="channel-name">#basement</span>
                    <span class="channel-users">0</span>
                </div>
            </div>
            <div class="chat-area">
                <div class="chat-messages" id="chat-messages">
                    <div class="system-message">
                        <span class="timestamp">[00:00]</span>
                        <span class="system-text">*** Welcome to The Basement IRC</span>
                    </div>
                    <div class="system-message">
                        <span class="timestamp">[00:00]</span>
                        <span class="system-text">*** Connect your wallet to chat</span>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="chat-input-field" placeholder="Type message...">
                    <input type="file" id="file-input" accept="image/*" style="display: none;">
                    <button type="button" id="file-upload-btn" class="file-upload-btn" disabled>üì∑</button>
                    <button id="send-btn" disabled>Send</button>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- Welcome Section -->
                <div class="welcome-section" id="welcome-section">
                    <h1 class="main-title">Welcome to The Basement</h1>
                    <p class="main-subtitle">Retro Web3 Arcade, IRC, and Forum on Basechain!</p>
                    
                    <!-- Live Stats Dashboard -->
                    <div class="stats-dashboard" style="margin-top: 40px; background: rgba(0, 0, 0, 0.7); border: 2px solid #0052ff99; border-radius: 12px; padding: 30px;">
                        <h2 style="font-family: 'Press Start 2P', monospace; font-size: 1rem; color: #00BFFF; text-align: center; margin-bottom: 25px;">üî• LIVE STATS üî•</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px;">
                            <div style="text-align: center; padding: 15px;">
                                <div style="font-family: 'Press Start 2P', monospace; font-size: 1.5rem; color: #ffd700; text-shadow: 0 0 10px #ffd700;" id="total-wagered-stat">0</div>
                                <div style="font-family: 'Courier Prime', monospace; font-size: 0.75rem; color: #888; margin-top: 10px; text-transform: uppercase;">ETH Wagered</div>
                            </div>
                            <div style="text-align: center; padding: 15px;">
                                <div style="font-family: 'Press Start 2P', monospace; font-size: 1.5rem; color: #00BFFF; text-shadow: 0 0 10px #00BFFF;" id="total-players-stat">0</div>
                                <div style="font-family: 'Courier Prime', monospace; font-size: 0.75rem; color: #888; margin-top: 10px; text-transform: uppercase;">Total Players</div>
                            </div>
                            <div style="text-align: center; padding: 15px;">
                                <div style="font-family: 'Press Start 2P', monospace; font-size: 1.5rem; color: #00FF88; text-shadow: 0 0 10px #00FF88;" id="total-rounds-stat">0</div>
                                <div style="font-family: 'Courier Prime', monospace; font-size: 0.75rem; color: #888; margin-top: 10px; text-transform: uppercase;">Rounds Played</div>
                            </div>
                            <div style="text-align: center; padding: 15px;">
                                <div style="font-family: 'Press Start 2P', monospace; font-size: 1.5rem; color: #ff00ff; text-shadow: 0 0 10px #ff00ff;" id="active-now-stat">0</div>
                                <div style="font-family: 'Courier Prime', monospace; font-size: 0.75rem; color: #888; margin-top: 10px; text-transform: uppercase;">Playing Now</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Forum Section -->
                <div class="forum-section hidden" id="forum-section">
                    <div class="forum-header">
                        <h2 class="forum-title">The Basement Forum</h2>
                        <p class="forum-subtitle">Discuss Web3, Base Chain, and Retro Gaming</p>
                        <button id="create-category-btn" class="create-category-btn">+ Create New Category</button>
                    </div>
                    
                    <div class="forum-categories">
                        <div class="category-card" data-category="general">
                            <div class="category-icon">üí¨</div>
                            <h3 class="category-title">General Discussion</h3>
                            <p class="category-desc">General chat about Web3 and Base Chain</p>
                            <div class="category-stats">
                                <span class="post-count">24 posts</span>
                                <span class="last-post">2 hours ago</span>
                            </div>
                        </div>
                        
                        <div class="category-card" data-category="gaming">
                            <div class="category-icon">üéÆ</div>
                            <h3 class="category-title">Gaming</h3>
                            <p class="category-desc">Retro games and Web3 gaming</p>
                            <div class="category-stats">
                                <span class="post-count">18 posts</span>
                                <span class="last-post">1 day ago</span>
                            </div>
                        </div>
                        
                        <div class="category-card" data-category="tech">
                            <div class="category-icon">‚ö°</div>
                            <h3 class="category-title">Technology</h3>
                            <p class="category-desc">Base Chain development and tech</p>
                            <div class="category-stats">
                                <span class="post-count">31 posts</span>
                                <span class="last-post">3 hours ago</span>
                            </div>
                        </div>
                        
                        <div class="category-card" data-category="nft">
                            <div class="category-icon">üñºÔ∏è</div>
                            <h3 class="category-title">NFTs & Art</h3>
                            <p class="category-desc">Digital art and NFT discussions</p>
                            <div class="category-stats">
                                <span class="post-count">12 posts</span>
                                <span class="last-post">5 hours ago</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="forum-posts hidden" id="forum-posts">
                        <div class="posts-header">
                            <button class="back-btn" id="back-to-categories">‚Üê Back to Categories</button>
                            <h3 class="posts-title" id="posts-title">General Discussion</h3>
                        </div>
                        <div class="posts-list" id="posts-list">
                            <!-- Posts will be generated dynamically -->
                        </div>
                        <div class="create-post">
                            <button class="create-post-btn" id="create-post-btn">+ Create New Thread</button>
                        </div>
                    </div>
                    
                    <div class="thread-view hidden" id="thread-view">
                        <div class="thread-header">
                            <button class="back-btn" id="back-to-posts">‚Üê Back to Threads</button>
                            <h3 class="thread-title" id="thread-title">Thread Title</h3>
                        </div>
                        <div class="thread-content" id="thread-content">
                            <!-- Thread posts will be generated dynamically -->
                        </div>
                        <div class="thread-reply">
                            <textarea id="thread-reply" class="thread-reply-input" placeholder="Reply to this thread..." rows="3"></textarea>
                            <button id="post-reply" class="post-reply-btn">Post Reply</button>
                        </div>
                    </div>
                    
                    <div class="post-editor hidden" id="post-editor">
                        <div class="editor-header">
                            <button class="back-btn" id="back-to-posts">‚Üê Back to Posts</button>
                            <h3 class="editor-title">Create New Post</h3>
                        </div>
                        <div class="editor-form">
                            <input type="text" id="post-title" class="post-title-input" placeholder="Post title..." maxlength="100">
                            <textarea id="post-content" class="post-content-input" placeholder="Write your post..." rows="10"></textarea>
                            <div class="editor-actions">
                                <button class="cancel-btn" id="cancel-post">Cancel</button>
                                <button class="publish-btn" id="publish-post">Publish Post</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Floating Particles -->
    <div class="particles" id="particles-container">
        <!-- Particles will be generated dynamically -->
    </div>

    <!-- Category Creation Dialog -->
    <div id="category-dialog" class="category-dialog hidden">
        <div class="dialog-content">
            <h3 class="dialog-title">Create New Category</h3>
            <div class="category-form">
                <div class="form-group">
                    <label class="form-label">Category Name:</label>
                    <input type="text" id="category-name" class="category-input" placeholder="Enter category name..." maxlength="30">
                </div>
                <div class="form-group">
                    <label class="form-label">Description:</label>
                    <input type="text" id="category-description" class="category-input" placeholder="What's this category about?" maxlength="100">
                </div>
                <div class="form-group">
                    <label class="form-label">Icon (emoji):</label>
                    <input type="text" id="category-icon" class="category-input" placeholder="üéÆ" maxlength="2">
                </div>
            </div>
            <div class="dialog-actions">
                <button id="cancel-category" class="cancel-btn">Cancel</button>
                <button id="create-category-submit" class="create-btn">Create Category</button>
            </div>
        </div>
    </div>

    <!-- Channel Creation Dialog -->
    <div id="channel-dialog" class="channel-dialog hidden">
        <div class="dialog-content">
            <h3 class="dialog-title">Create New Channel</h3>
            <div class="channel-form">
                <div class="form-group">
                    <label class="form-label">Channel Name:</label>
                    <input type="text" id="channel-name" class="channel-input" placeholder="#channel-name" maxlength="20">
                    <div class="form-hint">Channel names must start with # and contain only letters, numbers, and hyphens</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Description (optional):</label>
                    <input type="text" id="channel-description" class="channel-input" placeholder="What's this channel about?" maxlength="100">
                </div>
                <div class="form-group">
                    <label class="form-checkbox">
                        <input type="checkbox" id="channel-private">
                        <span class="checkmark"></span>
                        Private channel (invite only)
                    </label>
                </div>
            </div>
            <div class="dialog-actions">
                <button id="cancel-channel" class="cancel-btn">Cancel</button>
                <button id="create-channel-btn" class="create-btn">Create Channel</button>
            </div>
        </div>
    </div>

    <!-- Profile Setup Dialog -->
    <div id="profile-dialog" class="profile-dialog hidden">
        <div class="dialog-content">
            <h3 class="dialog-title">Complete Your Profile</h3>
            <div class="profile-setup">
                <div class="profile-pic-section">
                    <div class="profile-pic-preview">
                        <img id="dialog-profile-pic" class="profile-pic-preview-img" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iODAiIGhlaWdodD0iODAiIGZpbGw9IiMwMDUyZmY5OSIvPgogIDxjaXJjbGUgY3g9IjQwIiBjeT0iMzAiIHI9IjE1IiBmaWxsPSIjZmZmZmZmIi8+CiAgPHBhdGggZD0iTTIwIDYwQzIwIDUwIDMwIDQwIDQwIDQwUzYwIDUwIDYwIDYwVjcwSDIwVjYwWiIgZmlsbD0iI2ZmZmZmZiIvPgo8L3N2Zz4=" alt="Profile">
                        <button id="edit-profile-pic" class="edit-profile-btn" title="Change Profile Picture">‚úèÔ∏è</button>
                        <input type="file" id="profile-pic-input" accept="image/*" style="display: none;">
                    </div>
                </div>
                <div class="username-section">
                    <label class="username-label">Choose your display name:</label>
                    <div class="username-options-simple">
                        <div class="username-option" data-type="basename">
                            <input type="radio" id="basename-radio" name="username-type" value="basename">
                            <label for="basename-radio">
                                <span class="option-title">Base Name</span>
                                <span class="option-subtitle" id="basename-subtitle">Not available</span>
                            </label>
                        </div>
                        <div class="username-option" data-type="custom">
                            <input type="radio" id="custom-radio" name="username-type" value="custom" checked>
                            <label for="custom-radio">
                                <span class="option-title">Custom Username</span>
                                <input type="text" id="custom-username-simple" placeholder="Enter username..." maxlength="20">
                            </label>
                        </div>
                        <div class="username-option" data-type="wallet">
                            <input type="radio" id="wallet-radio" name="username-type" value="wallet">
                            <label for="wallet-radio">
                                <span class="option-title">Wallet Address</span>
                                <span class="option-subtitle" id="wallet-subtitle">Loading...</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="dialog-actions">
                    <button id="skip-setup" class="skip-btn">Skip for now</button>
                    <button id="save-profile" class="save-btn">Save Profile</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Security Module - MUST load first -->
    <script src="security.js"></script>
    <!-- Base Account SDK -->
    <script src="script.js"></script>
</body>
</html>